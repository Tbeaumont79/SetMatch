{% extends 'base.html.twig' %}

{% block title %}Hello UserPostsController!{% endblock %}

{% block body %}
    {% for post in userPost %}
        <div class="card bg-base-100 shadow-lg flex-col items-center pt-14 w-full">
            <div class="card-body">
                <div class="flex items-center gap-3 mb-4">
                    <div class="avatar">
                        <div class="w-10 rounded-full">
                            {% if post.author.avatar %}
                                <img src="{{ post.author.avatar }}" alt="Avatar" />
                            {% else %}
                                <img src="https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.webp" alt="Avatar par défaut" />
                            {% endif %}
                        </div>
                    </div>
                    <div>
                        <div class="font-semibold">{{ post.author.email|split('@')[0] }}</div>
                        <div class="text-sm text-base-content/70">
                            {{ post.createdAt|date('d/m/Y à H:i') }}
                        </div>
                    </div>
                </div>

                <p class="mb-4">{{ post.content }}</p>

                {% if post.image %}
                    <div class="mb-4">
                        <img src="{{ vich_uploader_asset(post, 'imageFile') }}" alt="Image du post" class="rounded-lg max-w-full h-auto" />
                    </div>
                {% endif %}

                <div class="card-actions justify-start">
                    <button class="btn btn-ghost btn-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                        </svg>
                        J'aime
                    </button>
                    <button class="btn btn-ghost btn-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                        Commenter
                    </button>
                    <button class="btn btn-ghost btn-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                        Partager
                    </button>
                </div>
            </div>
        </div>
    {% endfor %}
{% endblock %}
